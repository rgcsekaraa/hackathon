[build]
builder = "docker"

[deploy]
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

[[services]]
name = "api"
root = "apps/api"
dockerfile = "Dockerfile"
[services.env]
PORT = "8000"

[[services]]
name = "worker"
root = "apps/api"
dockerfile = "Dockerfile"
startCommand = "python services/voice/livekit_agent.py prod"
[services.env]
# Worker doesn't need a port exposed usually, but Railway might check health
# Ensure all env vars like LIVEKIT_URL are set in the project settings

[[services]]
name = "web"
root = "apps/web"
dockerfile = "Dockerfile"
[services.env]
PORT = "3000"
